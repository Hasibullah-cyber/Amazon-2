/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai-chat/route";
exports.ids = ["app/api/ai-chat/route"];
exports.modules = {

/***/ "(rsc)/./app/api/ai-chat/route.ts":
/*!**********************************!*\
  !*** ./app/api/ai-chat/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/api/server.js\");\n\nconst GEMINI_API_KEY = process.env.GEMINI_API_KEY;\n// Helper function for search suggestions\nfunction getSearchSuggestions(message) {\n    const lowerMessage = message.toLowerCase();\n    if (lowerMessage.includes(\"face\") || lowerMessage.includes(\"skin\") || lowerMessage.includes(\"beauty\") || lowerMessage.includes(\"makeup\") || lowerMessage.includes(\"cream\")) {\n        return `**Beauty & Personal Care** is perfect for you! üíÑ\n‚Ä¢ Luxury Skincare Set (‡ß≥14,300) - Complete face care routine\n‚Ä¢ Facial Massager (‡ß≥6,600) - For glowing skin\n‚Ä¢ Makeup Brush Set (‡ß≥5,500) - Professional tools\n‚Ä¢ Premium Hair Dryer (‡ß≥9,900) - Salon-quality styling`;\n    }\n    if (lowerMessage.includes(\"fashion\") || lowerMessage.includes(\"clothes\") || lowerMessage.includes(\"sunglasses\") || lowerMessage.includes(\"wallet\")) {\n        return `**Fashion** category matches your search! üëî\n‚Ä¢ Designer Sunglasses (‡ß≥8,800) - Stylish eye protection\n‚Ä¢ Premium Leather Wallet (‡ß≥5,500) - Elegant and durable\n‚Ä¢ Classic Wristwatch (‡ß≥17,600) - Timeless design\n‚Ä¢ Designer Handbag (‡ß≥22,000) - Luxury accessory`;\n    }\n    if (lowerMessage.includes(\"home\") || lowerMessage.includes(\"candle\") || lowerMessage.includes(\"decor\") || lowerMessage.includes(\"living\")) {\n        return `**Home & Living** is what you need! üè†\n‚Ä¢ Scented Candle Set (‡ß≥3,850) - Relaxing atmosphere\n‚Ä¢ Luxury Bed Sheets (‡ß≥9,900) - Ultimate comfort\n‚Ä¢ Modern Wall Clock (‡ß≥5,500) - Stylish timepiece\n‚Ä¢ Ceramic Vase Set (‡ß≥6,600) - Beautiful decor`;\n    }\n    if (lowerMessage.includes(\"tech\") || lowerMessage.includes(\"electronic\") || lowerMessage.includes(\"headphone\") || lowerMessage.includes(\"phone\")) {\n        return `**Electronics** category for you! üì±\n‚Ä¢ Premium Wireless Headphones (‡ß≥22,000) - Superior sound\n‚Ä¢ Smart Fitness Watch (‡ß≥16,500) - Health tracking\n‚Ä¢ Ultra HD Camera (‡ß≥33,000) - Professional photos\n‚Ä¢ Portable Power Bank (‡ß≥6,600) - Stay charged`;\n    }\n    return `**Browse our categories:**\n‚Ä¢ üì± **Electronics** (‡ß≥1,000-‡ß≥25,000): Tech gadgets, headphones, cameras\n‚Ä¢ üëî **Fashion** (‡ß≥500-‡ß≥15,000): Sunglasses, wallets, accessories\n‚Ä¢ ÔøΩ **Home & Living** (‡ß≥300-‡ß≥8,000): Candles, decor, bedding\n‚Ä¢ üíÑ **Beauty** (‡ß≥800-‡ß≥12,000): Skincare, makeup, hair care`;\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { message, context } = body;\n        if (!message) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Message is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if API key is configured and valid\n        if (!GEMINI_API_KEY || GEMINI_API_KEY === \"AIzaSyBAUxGbH4WJ5g0vdJ2fo4q5NNUbZkQg4vA\" || GEMINI_API_KEY.length < 10) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                response: `I'm currently running in offline mode, but I can still help you! üõçÔ∏è\n\n**To enable full AI features:**\n1. Visit: https://aistudio.google.com/app/apikey\n2. Create a new API key\n3. Add it to your environment variables as GEMINI_API_KEY\n\n**For your question: \"${message}\"**\n${getSearchSuggestions(message)}\n\nüí≥ **Payment Options:** bKash, Nagad, Rocket, Cards, Cash on Delivery\nüöö **Delivery:** 1-2 days in Dhaka, 2-4 days nationwide  \nüí∞ **Free shipping** on orders over ‡ß≥5,000\nüîÑ **Returns:** 14-day return policy\n\nWhat category interests you most?`\n            });\n        }\n        // Create a context-aware prompt for the shopping assistant\n        const systemPrompt = `You are a helpful AI shopping assistant for Hasib Shop, an e-commerce website in Bangladesh. \n\nOur product categories and popular items:\n\n**Electronics (‡ß≥1,000 - ‡ß≥25,000):**\n- Premium Wireless Headphones (‡ß≥22,000)\n- Smart Fitness Watch (‡ß≥16,500) \n- Ultra HD Camera (‡ß≥33,000)\n- Portable Power Bank (‡ß≥6,600)\n- Wireless Earbuds (‡ß≥9,900)\n- Smart Home Speaker (‡ß≥14,300)\n\n**Fashion (‡ß≥500 - ‡ß≥15,000):**\n- Designer Sunglasses (‡ß≥8,800)\n- Premium Leather Wallet (‡ß≥5,500)\n- Classic Wristwatch (‡ß≥17,600)\n- Silk Neck Tie (‡ß≥4,400)\n- Leather Belt (‡ß≥5,060)\n- Designer Handbag (‡ß≥22,000)\n\n**Home & Living (‡ß≥300 - ‡ß≥8,000):**\n- Scented Candle Set (‡ß≥3,850)\n- Decorative Throw Pillows (‡ß≥3,300)\n- Modern Wall Clock (‡ß≥5,500)\n- Ceramic Vase Set (‡ß≥6,600)\n- Luxury Bed Sheets (‡ß≥9,900)\n- Table Lamp (‡ß≥7,700)\n\n**Beauty & Personal Care (‡ß≥800 - ‡ß≥12,000):**\n- Luxury Skincare Set (‡ß≥14,300)\n- Premium Hair Dryer (‡ß≥9,900)\n- Electric Shaver (‡ß≥8,800)\n- Makeup Brush Set (‡ß≥5,500)\n- Perfume Collection (‡ß≥13,200)\n- Facial Massager (‡ß≥6,600)\n\n**Store Information:**\n- Payment: bKash, Nagad, Rocket, Credit/Debit Cards, Cash on Delivery\n- Delivery: 1-2 days in Dhaka, 2-4 days outside Dhaka\n- All prices include 10% VAT\n- 14-day return policy on most items\n- Free shipping on orders over ‡ß≥5,000\n- Customer service: contact@hasibshop.com\n\nPlease help customers find products, answer questions about policies, and provide helpful shopping advice. Be friendly, concise, and always mention prices in Bangladeshi Taka (‡ß≥). If someone asks about face products, skincare, makeup, or beauty items, recommend our Beauty & Personal Care category.\n\nCustomer question: ${message}`;\n        // Make request to Gemini API\n        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                contents: [\n                    {\n                        parts: [\n                            {\n                                text: systemPrompt\n                            }\n                        ]\n                    }\n                ],\n                generationConfig: {\n                    temperature: 0.7,\n                    topK: 1,\n                    topP: 1,\n                    maxOutputTokens: 2048,\n                    stopSequences: []\n                },\n                safetySettings: [\n                    {\n                        category: \"HARM_CATEGORY_HARASSMENT\",\n                        threshold: \"BLOCK_MEDIUM_AND_ABOVE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_HATE_SPEECH\",\n                        threshold: \"BLOCK_MEDIUM_AND_ABOVE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\n                        threshold: \"BLOCK_MEDIUM_AND_ABOVE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_DANGEROUS_CONTENT\",\n                        threshold: \"BLOCK_MEDIUM_AND_ABOVE\"\n                    }\n                ]\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"Gemini API error:\", response.status, errorText);\n            // Handle specific API key errors\n            if (response.status === 400 && errorText.includes(\"API key not valid\")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    response: `üîë **API Key Setup Required**\n\nTo enable full AI chat:\n1. Visit: https://aistudio.google.com/app/apikey\n2. Sign in with Google account\n3. Click \"Create API Key\"\n4. Copy the key to your .env.local file\n\n**Current Search Help for \"${message}\":**\n${getSearchSuggestions(message)}\n\nBrowse our categories above to find what you need! üõçÔ∏è`\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                response: `I'm having some technical difficulties, but I can still help! \n\n**For \"${message}\", try these categories:**\n${getSearchSuggestions(message)}\n\n**Popular Products:**\n‚Ä¢ Electronics: Headphones (‡ß≥22,000), Smartwatch (‡ß≥16,500)\n‚Ä¢ Fashion: Sunglasses (‡ß≥8,800), Wallet (‡ß≥5,500)\n‚Ä¢ Home: Candle Set (‡ß≥3,850), Bed Sheets (‡ß≥9,900)\n‚Ä¢ Beauty: Skincare Set (‡ß≥14,300), Hair Dryer (‡ß≥9,900)\n\nWhat interests you most? üõçÔ∏è`\n            });\n        }\n        const responseText = await response.text();\n        const data = JSON.parse(responseText);\n        if (!data.candidates || !data.candidates[0] || !data.candidates[0].content) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                response: `Welcome to Hasib Shop! üõçÔ∏è\n\n**For \"${message}\", I recommend:**\n${getSearchSuggestions(message)}\n\n**Quick Facts:**\n‚Ä¢ üí≥ Payment: bKash, Nagad, Rocket, Cards, COD\n‚Ä¢ üöö Delivery: 1-2 days in Dhaka\n‚Ä¢ üí∞ Free shipping over ‡ß≥5,000\n‚Ä¢ üîÑ 14-day returns\n\nWhat category interests you? üõçÔ∏è`\n            });\n        }\n        const aiResponse = data.candidates[0].content.parts[0].text;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            response: aiResponse\n        });\n    } catch (error) {\n        console.error(\"Error in AI chat API:\", error);\n        // Return a helpful fallback response instead of an error\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            response: `Welcome to Hasib Shop! üõçÔ∏è I'm here to help you find the perfect products.\n\n**Quick Shopping Guide:**\n‚Ä¢ üì± **Electronics**: Latest gadgets and tech accessories\n‚Ä¢ üëî **Fashion**: Stylish clothing and accessories  \n‚Ä¢ üè† **Home & Living**: Beautiful decor and essentials\n‚Ä¢ üíÑ **Beauty**: Premium skincare and cosmetics\n\n**Store Info:**\n‚Ä¢ Payment: bKash, Nagad, Rocket, Cards, COD\n‚Ä¢ Delivery: 1-2 days in Dhaka, 2-4 days nationwide\n‚Ä¢ Free shipping on orders over ‡ß≥5,000\n\nWhat category interests you? üõçÔ∏è`\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTztRQUNkd0IsUUFBUXhCLEtBQUssQ0FBQyx5QkFBeUJBO1FBRXZDLHlEQUF5RDtRQUN6RCxPQUFPZCxxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDO1lBQ3ZCSyxVQUFVLENBQUM7Ozs7Ozs7Ozs7Ozs7Z0NBYWUsQ0FBQztRQUM3QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvYXBwL2FwaS9haS1jaGF0L3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5cbmNvbnN0IEdFTUlOSV9BUElfS0VZID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVlcblxuLy8gSGVscGVyIGZ1bmN0aW9uIGZvciBzZWFyY2ggc3VnZ2VzdGlvbnNcbmZ1bmN0aW9uIGdldFNlYXJjaFN1Z2dlc3Rpb25zKG1lc3NhZ2U6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGxvd2VyTWVzc2FnZSA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKVxuXG4gIGlmIChcbiAgICBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoXCJmYWNlXCIpIHx8XG4gICAgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKFwic2tpblwiKSB8fFxuICAgIGxvd2VyTWVzc2FnZS5pbmNsdWRlcyhcImJlYXV0eVwiKSB8fFxuICAgIGxvd2VyTWVzc2FnZS5pbmNsdWRlcyhcIm1ha2V1cFwiKSB8fFxuICAgIGxvd2VyTWVzc2FnZS5pbmNsdWRlcyhcImNyZWFtXCIpXG4gICkge1xuICAgIHJldHVybiBgKipCZWF1dHkgJiBQZXJzb25hbCBDYXJlKiogaXMgcGVyZmVjdCBmb3IgeW91ISDwn5KEXG7igKIgTHV4dXJ5IFNraW5jYXJlIFNldCAo4KezMTQsMzAwKSAtIENvbXBsZXRlIGZhY2UgY2FyZSByb3V0aW5lXG7igKIgRmFjaWFsIE1hc3NhZ2VyICjgp7M2LDYwMCkgLSBGb3IgZ2xvd2luZyBza2luXG7igKIgTWFrZXVwIEJydXNoIFNldCAo4KezNSw1MDApIC0gUHJvZmVzc2lvbmFsIHRvb2xzXG7igKIgUHJlbWl1bSBIYWlyIERyeWVyICjgp7M5LDkwMCkgLSBTYWxvbi1xdWFsaXR5IHN0eWxpbmdgXG4gIH1cblxuICBpZiAoXG4gICAgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKFwiZmFzaGlvblwiKSB8fFxuICAgIGxvd2VyTWVzc2FnZS5pbmNsdWRlcyhcImNsb3RoZXNcIikgfHxcbiAgICBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoXCJzdW5nbGFzc2VzXCIpIHx8XG4gICAgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKFwid2FsbGV0XCIpXG4gICkge1xuICAgIHJldHVybiBgKipGYXNoaW9uKiogY2F0ZWdvcnkgbWF0Y2hlcyB5b3VyIHNlYXJjaCEg8J+RlFxu4oCiIERlc2lnbmVyIFN1bmdsYXNzZXMgKOCnszgsODAwKSAtIFN0eWxpc2ggZXllIHByb3RlY3Rpb25cbuKAoiBQcmVtaXVtIExlYXRoZXIgV2FsbGV0ICjgp7M1LDUwMCkgLSBFbGVnYW50IGFuZCBkdXJhYmxlXG7igKIgQ2xhc3NpYyBXcmlzdHdhdGNoICjgp7MxNyw2MDApIC0gVGltZWxlc3MgZGVzaWduXG7igKIgRGVzaWduZXIgSGFuZGJhZyAo4KezMjIsMDAwKSAtIEx1eHVyeSBhY2Nlc3NvcnlgXG4gIH1cblxuICBpZiAoXG4gICAgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKFwiaG9tZVwiKSB8fFxuICAgIGxvd2VyTWVzc2FnZS5pbmNsdWRlcyhcImNhbmRsZVwiKSB8fFxuICAgIGxvd2VyTWVzc2FnZS5pbmNsdWRlcyhcImRlY29yXCIpIHx8XG4gICAgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKFwibGl2aW5nXCIpXG4gICkge1xuICAgIHJldHVybiBgKipIb21lICYgTGl2aW5nKiogaXMgd2hhdCB5b3UgbmVlZCEg8J+PoFxu4oCiIFNjZW50ZWQgQ2FuZGxlIFNldCAo4KezMyw4NTApIC0gUmVsYXhpbmcgYXRtb3NwaGVyZVxu4oCiIEx1eHVyeSBCZWQgU2hlZXRzICjgp7M5LDkwMCkgLSBVbHRpbWF0ZSBjb21mb3J0XG7igKIgTW9kZXJuIFdhbGwgQ2xvY2sgKOCnszUsNTAwKSAtIFN0eWxpc2ggdGltZXBpZWNlXG7igKIgQ2VyYW1pYyBWYXNlIFNldCAo4KezNiw2MDApIC0gQmVhdXRpZnVsIGRlY29yYFxuICB9XG5cbiAgaWYgKFxuICAgIGxvd2VyTWVzc2FnZS5pbmNsdWRlcyhcInRlY2hcIikgfHxcbiAgICBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoXCJlbGVjdHJvbmljXCIpIHx8XG4gICAgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKFwiaGVhZHBob25lXCIpIHx8XG4gICAgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKFwicGhvbmVcIilcbiAgKSB7XG4gICAgcmV0dXJuIGAqKkVsZWN0cm9uaWNzKiogY2F0ZWdvcnkgZm9yIHlvdSEg8J+TsVxu4oCiIFByZW1pdW0gV2lyZWxlc3MgSGVhZHBob25lcyAo4KezMjIsMDAwKSAtIFN1cGVyaW9yIHNvdW5kXG7igKIgU21hcnQgRml0bmVzcyBXYXRjaCAo4KezMTYsNTAwKSAtIEhlYWx0aCB0cmFja2luZ1xu4oCiIFVsdHJhIEhEIENhbWVyYSAo4KezMzMsMDAwKSAtIFByb2Zlc3Npb25hbCBwaG90b3NcbuKAoiBQb3J0YWJsZSBQb3dlciBCYW5rICjgp7M2LDYwMCkgLSBTdGF5IGNoYXJnZWRgXG4gIH1cblxuICByZXR1cm4gYCoqQnJvd3NlIG91ciBjYXRlZ29yaWVzOioqXG7igKIg8J+TsSAqKkVsZWN0cm9uaWNzKiogKOCnszEsMDAwLeCnszI1LDAwMCk6IFRlY2ggZ2FkZ2V0cywgaGVhZHBob25lcywgY2FtZXJhc1xu4oCiIPCfkZQgKipGYXNoaW9uKiogKOCnszUwMC3gp7MxNSwwMDApOiBTdW5nbGFzc2VzLCB3YWxsZXRzLCBhY2Nlc3Nvcmllc1xu4oCiIO+/vSAqKkhvbWUgJiBMaXZpbmcqKiAo4KezMzAwLeCnszgsMDAwKTogQ2FuZGxlcywgZGVjb3IsIGJlZGRpbmdcbuKAoiDwn5KEICoqQmVhdXR5KiogKOCnszgwMC3gp7MxMiwwMDApOiBTa2luY2FyZSwgbWFrZXVwLCBoYWlyIGNhcmVgXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgY29uc3QgeyBtZXNzYWdlLCBjb250ZXh0IH0gPSBib2R5XG5cbiAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk1lc3NhZ2UgaXMgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgQVBJIGtleSBpcyBjb25maWd1cmVkIGFuZCB2YWxpZFxuICAgIGlmICghR0VNSU5JX0FQSV9LRVkgfHwgR0VNSU5JX0FQSV9LRVkgPT09IFwiQUl6YVN5QkFVeEdiSDRXSjVnMHZkSjJmbzRxNU5OVWJaa1FnNHZBXCIgfHwgR0VNSU5JX0FQSV9LRVkubGVuZ3RoIDwgMTApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHJlc3BvbnNlOiBgSSdtIGN1cnJlbnRseSBydW5uaW5nIGluIG9mZmxpbmUgbW9kZSwgYnV0IEkgY2FuIHN0aWxsIGhlbHAgeW91ISDwn5uN77iPXG5cbioqVG8gZW5hYmxlIGZ1bGwgQUkgZmVhdHVyZXM6KipcbjEuIFZpc2l0OiBodHRwczovL2Fpc3R1ZGlvLmdvb2dsZS5jb20vYXBwL2FwaWtleVxuMi4gQ3JlYXRlIGEgbmV3IEFQSSBrZXlcbjMuIEFkZCBpdCB0byB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcyBHRU1JTklfQVBJX0tFWVxuXG4qKkZvciB5b3VyIHF1ZXN0aW9uOiBcIiR7bWVzc2FnZX1cIioqXG4ke2dldFNlYXJjaFN1Z2dlc3Rpb25zKG1lc3NhZ2UpfVxuXG7wn5KzICoqUGF5bWVudCBPcHRpb25zOioqIGJLYXNoLCBOYWdhZCwgUm9ja2V0LCBDYXJkcywgQ2FzaCBvbiBEZWxpdmVyeVxu8J+amiAqKkRlbGl2ZXJ5OioqIDEtMiBkYXlzIGluIERoYWthLCAyLTQgZGF5cyBuYXRpb253aWRlICBcbvCfkrAgKipGcmVlIHNoaXBwaW5nKiogb24gb3JkZXJzIG92ZXIg4KezNSwwMDBcbvCflIQgKipSZXR1cm5zOioqIDE0LWRheSByZXR1cm4gcG9saWN5XG5cbldoYXQgY2F0ZWdvcnkgaW50ZXJlc3RzIHlvdSBtb3N0P2AsXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIGNvbnRleHQtYXdhcmUgcHJvbXB0IGZvciB0aGUgc2hvcHBpbmcgYXNzaXN0YW50XG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYFlvdSBhcmUgYSBoZWxwZnVsIEFJIHNob3BwaW5nIGFzc2lzdGFudCBmb3IgSGFzaWIgU2hvcCwgYW4gZS1jb21tZXJjZSB3ZWJzaXRlIGluIEJhbmdsYWRlc2guIFxuXG5PdXIgcHJvZHVjdCBjYXRlZ29yaWVzIGFuZCBwb3B1bGFyIGl0ZW1zOlxuXG4qKkVsZWN0cm9uaWNzICjgp7MxLDAwMCAtIOCnszI1LDAwMCk6Kipcbi0gUHJlbWl1bSBXaXJlbGVzcyBIZWFkcGhvbmVzICjgp7MyMiwwMDApXG4tIFNtYXJ0IEZpdG5lc3MgV2F0Y2ggKOCnszE2LDUwMCkgXG4tIFVsdHJhIEhEIENhbWVyYSAo4KezMzMsMDAwKVxuLSBQb3J0YWJsZSBQb3dlciBCYW5rICjgp7M2LDYwMClcbi0gV2lyZWxlc3MgRWFyYnVkcyAo4KezOSw5MDApXG4tIFNtYXJ0IEhvbWUgU3BlYWtlciAo4KezMTQsMzAwKVxuXG4qKkZhc2hpb24gKOCnszUwMCAtIOCnszE1LDAwMCk6Kipcbi0gRGVzaWduZXIgU3VuZ2xhc3NlcyAo4KezOCw4MDApXG4tIFByZW1pdW0gTGVhdGhlciBXYWxsZXQgKOCnszUsNTAwKVxuLSBDbGFzc2ljIFdyaXN0d2F0Y2ggKOCnszE3LDYwMClcbi0gU2lsayBOZWNrIFRpZSAo4KezNCw0MDApXG4tIExlYXRoZXIgQmVsdCAo4KezNSwwNjApXG4tIERlc2lnbmVyIEhhbmRiYWcgKOCnszIyLDAwMClcblxuKipIb21lICYgTGl2aW5nICjgp7MzMDAgLSDgp7M4LDAwMCk6Kipcbi0gU2NlbnRlZCBDYW5kbGUgU2V0ICjgp7MzLDg1MClcbi0gRGVjb3JhdGl2ZSBUaHJvdyBQaWxsb3dzICjgp7MzLDMwMClcbi0gTW9kZXJuIFdhbGwgQ2xvY2sgKOCnszUsNTAwKVxuLSBDZXJhbWljIFZhc2UgU2V0ICjgp7M2LDYwMClcbi0gTHV4dXJ5IEJlZCBTaGVldHMgKOCnszksOTAwKVxuLSBUYWJsZSBMYW1wICjgp7M3LDcwMClcblxuKipCZWF1dHkgJiBQZXJzb25hbCBDYXJlICjgp7M4MDAgLSDgp7MxMiwwMDApOioqXG4tIEx1eHVyeSBTa2luY2FyZSBTZXQgKOCnszE0LDMwMClcbi0gUHJlbWl1bSBIYWlyIERyeWVyICjgp7M5LDkwMClcbi0gRWxlY3RyaWMgU2hhdmVyICjgp7M4LDgwMClcbi0gTWFrZXVwIEJydXNoIFNldCAo4KezNSw1MDApXG4tIFBlcmZ1bWUgQ29sbGVjdGlvbiAo4KezMTMsMjAwKVxuLSBGYWNpYWwgTWFzc2FnZXIgKOCnszYsNjAwKVxuXG4qKlN0b3JlIEluZm9ybWF0aW9uOioqXG4tIFBheW1lbnQ6IGJLYXNoLCBOYWdhZCwgUm9ja2V0LCBDcmVkaXQvRGViaXQgQ2FyZHMsIENhc2ggb24gRGVsaXZlcnlcbi0gRGVsaXZlcnk6IDEtMiBkYXlzIGluIERoYWthLCAyLTQgZGF5cyBvdXRzaWRlIERoYWthXG4tIEFsbCBwcmljZXMgaW5jbHVkZSAxMCUgVkFUXG4tIDE0LWRheSByZXR1cm4gcG9saWN5IG9uIG1vc3QgaXRlbXNcbi0gRnJlZSBzaGlwcGluZyBvbiBvcmRlcnMgb3ZlciDgp7M1LDAwMFxuLSBDdXN0b21lciBzZXJ2aWNlOiBjb250YWN0QGhhc2lic2hvcC5jb21cblxuUGxlYXNlIGhlbHAgY3VzdG9tZXJzIGZpbmQgcHJvZHVjdHMsIGFuc3dlciBxdWVzdGlvbnMgYWJvdXQgcG9saWNpZXMsIGFuZCBwcm92aWRlIGhlbHBmdWwgc2hvcHBpbmcgYWR2aWNlLiBCZSBmcmllbmRseSwgY29uY2lzZSwgYW5kIGFsd2F5cyBtZW50aW9uIHByaWNlcyBpbiBCYW5nbGFkZXNoaSBUYWthICjgp7MpLiBJZiBzb21lb25lIGFza3MgYWJvdXQgZmFjZSBwcm9kdWN0cywgc2tpbmNhcmUsIG1ha2V1cCwgb3IgYmVhdXR5IGl0ZW1zLCByZWNvbW1lbmQgb3VyIEJlYXV0eSAmIFBlcnNvbmFsIENhcmUgY2F0ZWdvcnkuXG5cbkN1c3RvbWVyIHF1ZXN0aW9uOiAke21lc3NhZ2V9YFxuXG4gICAgLy8gTWFrZSByZXF1ZXN0IHRvIEdlbWluaSBBUElcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLTEuNS1mbGFzaC1sYXRlc3Q6Z2VuZXJhdGVDb250ZW50P2tleT0ke0dFTUlOSV9BUElfS0VZfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGNvbnRlbnRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHBhcnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgdGV4dDogc3lzdGVtUHJvbXB0LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgICAgICAgIHRvcEs6IDEsXG4gICAgICAgICAgICB0b3BQOiAxLFxuICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiAyMDQ4LFxuICAgICAgICAgICAgc3RvcFNlcXVlbmNlczogW10sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYWZldHlTZXR0aW5nczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjYXRlZ29yeTogXCJIQVJNX0NBVEVHT1JZX0hBUkFTU01FTlRcIixcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNhdGVnb3J5OiBcIkhBUk1fQ0FURUdPUllfSEFURV9TUEVFQ0hcIixcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNhdGVnb3J5OiBcIkhBUk1fQ0FURUdPUllfU0VYVUFMTFlfRVhQTElDSVRcIixcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNhdGVnb3J5OiBcIkhBUk1fQ0FURUdPUllfREFOR0VST1VTX0NPTlRFTlRcIixcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX01FRElVTV9BTkRfQUJPVkVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICB9LFxuICAgIClcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgY29uc29sZS5lcnJvcihcIkdlbWluaSBBUEkgZXJyb3I6XCIsIHJlc3BvbnNlLnN0YXR1cywgZXJyb3JUZXh0KVxuXG4gICAgICAvLyBIYW5kbGUgc3BlY2lmaWMgQVBJIGtleSBlcnJvcnNcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMCAmJiBlcnJvclRleHQuaW5jbHVkZXMoXCJBUEkga2V5IG5vdCB2YWxpZFwiKSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHJlc3BvbnNlOiBg8J+UkSAqKkFQSSBLZXkgU2V0dXAgUmVxdWlyZWQqKlxuXG5UbyBlbmFibGUgZnVsbCBBSSBjaGF0OlxuMS4gVmlzaXQ6IGh0dHBzOi8vYWlzdHVkaW8uZ29vZ2xlLmNvbS9hcHAvYXBpa2V5XG4yLiBTaWduIGluIHdpdGggR29vZ2xlIGFjY291bnRcbjMuIENsaWNrIFwiQ3JlYXRlIEFQSSBLZXlcIlxuNC4gQ29weSB0aGUga2V5IHRvIHlvdXIgLmVudi5sb2NhbCBmaWxlXG5cbioqQ3VycmVudCBTZWFyY2ggSGVscCBmb3IgXCIke21lc3NhZ2V9XCI6KipcbiR7Z2V0U2VhcmNoU3VnZ2VzdGlvbnMobWVzc2FnZSl9XG5cbkJyb3dzZSBvdXIgY2F0ZWdvcmllcyBhYm92ZSB0byBmaW5kIHdoYXQgeW91IG5lZWQhIPCfm43vuI9gLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICByZXNwb25zZTogYEknbSBoYXZpbmcgc29tZSB0ZWNobmljYWwgZGlmZmljdWx0aWVzLCBidXQgSSBjYW4gc3RpbGwgaGVscCEgXG5cbioqRm9yIFwiJHttZXNzYWdlfVwiLCB0cnkgdGhlc2UgY2F0ZWdvcmllczoqKlxuJHtnZXRTZWFyY2hTdWdnZXN0aW9ucyhtZXNzYWdlKX1cblxuKipQb3B1bGFyIFByb2R1Y3RzOioqXG7igKIgRWxlY3Ryb25pY3M6IEhlYWRwaG9uZXMgKOCnszIyLDAwMCksIFNtYXJ0d2F0Y2ggKOCnszE2LDUwMClcbuKAoiBGYXNoaW9uOiBTdW5nbGFzc2VzICjgp7M4LDgwMCksIFdhbGxldCAo4KezNSw1MDApXG7igKIgSG9tZTogQ2FuZGxlIFNldCAo4KezMyw4NTApLCBCZWQgU2hlZXRzICjgp7M5LDkwMClcbuKAoiBCZWF1dHk6IFNraW5jYXJlIFNldCAo4KezMTQsMzAwKSwgSGFpciBEcnllciAo4KezOSw5MDApXG5cbldoYXQgaW50ZXJlc3RzIHlvdSBtb3N0PyDwn5uN77iPYCxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KVxuXG4gICAgaWYgKCFkYXRhLmNhbmRpZGF0ZXMgfHwgIWRhdGEuY2FuZGlkYXRlc1swXSB8fCAhZGF0YS5jYW5kaWRhdGVzWzBdLmNvbnRlbnQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHJlc3BvbnNlOiBgV2VsY29tZSB0byBIYXNpYiBTaG9wISDwn5uN77iPXG5cbioqRm9yIFwiJHttZXNzYWdlfVwiLCBJIHJlY29tbWVuZDoqKlxuJHtnZXRTZWFyY2hTdWdnZXN0aW9ucyhtZXNzYWdlKX1cblxuKipRdWljayBGYWN0czoqKlxu4oCiIPCfkrMgUGF5bWVudDogYkthc2gsIE5hZ2FkLCBSb2NrZXQsIENhcmRzLCBDT0RcbuKAoiDwn5qaIERlbGl2ZXJ5OiAxLTIgZGF5cyBpbiBEaGFrYVxu4oCiIPCfkrAgRnJlZSBzaGlwcGluZyBvdmVyIOCnszUsMDAwXG7igKIg8J+UhCAxNC1kYXkgcmV0dXJuc1xuXG5XaGF0IGNhdGVnb3J5IGludGVyZXN0cyB5b3U/IPCfm43vuI9gLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBhaVJlc3BvbnNlID0gZGF0YS5jYW5kaWRhdGVzWzBdLmNvbnRlbnQucGFydHNbMF0udGV4dFxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgcmVzcG9uc2U6IGFpUmVzcG9uc2UgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gQUkgY2hhdCBBUEk6XCIsIGVycm9yKVxuXG4gICAgLy8gUmV0dXJuIGEgaGVscGZ1bCBmYWxsYmFjayByZXNwb25zZSBpbnN0ZWFkIG9mIGFuIGVycm9yXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHJlc3BvbnNlOiBgV2VsY29tZSB0byBIYXNpYiBTaG9wISDwn5uN77iPIEknbSBoZXJlIHRvIGhlbHAgeW91IGZpbmQgdGhlIHBlcmZlY3QgcHJvZHVjdHMuXG5cbioqUXVpY2sgU2hvcHBpbmcgR3VpZGU6KipcbuKAoiDwn5OxICoqRWxlY3Ryb25pY3MqKjogTGF0ZXN0IGdhZGdldHMgYW5kIHRlY2ggYWNjZXNzb3JpZXNcbuKAoiDwn5GUICoqRmFzaGlvbioqOiBTdHlsaXNoIGNsb3RoaW5nIGFuZCBhY2Nlc3NvcmllcyAgXG7igKIg8J+PoCAqKkhvbWUgJiBMaXZpbmcqKjogQmVhdXRpZnVsIGRlY29yIGFuZCBlc3NlbnRpYWxzXG7igKIg8J+ShCAqKkJlYXV0eSoqOiBQcmVtaXVtIHNraW5jYXJlIGFuZCBjb3NtZXRpY3NcblxuKipTdG9yZSBJbmZvOioqXG7igKIgUGF5bWVudDogYkthc2gsIE5hZ2FkLCBSb2NrZXQsIENhcmRzLCBDT0RcbuKAoiBEZWxpdmVyeTogMS0yIGRheXMgaW4gRGhha2EsIDItNCBkYXlzIG5hdGlvbndpZGVcbuKAoiBGcmVlIHNoaXBwaW5nIG9uIG9yZGVycyBvdmVyIOCnszUsMDAwXG5cbldoYXQgY2F0ZWdvcnkgaW50ZXJlc3RzIHlvdT8g8J+bje+4j2AsXG4gICAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIkdFTUlOSV9BUElfS0VZIiwicHJvY2VzcyIsImVudiIsImdldFNlYXJjaFN1Z2dlc3Rpb25zIiwibWVzc2FnZSIsImxvd2VyTWVzc2FnZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwiY29udGV4dCIsImVycm9yIiwic3RhdHVzIiwibGVuZ3RoIiwicmVzcG9uc2UiLCJzeXN0ZW1Qcm9tcHQiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udGVudHMiLCJwYXJ0cyIsInRleHQiLCJnZW5lcmF0aW9uQ29uZmlnIiwidGVtcGVyYXR1cmUiLCJ0b3BLIiwidG9wUCIsIm1heE91dHB1dFRva2VucyIsInN0b3BTZXF1ZW5jZXMiLCJzYWZldHlTZXR0aW5ncyIsImNhdGVnb3J5IiwidGhyZXNob2xkIiwib2siLCJlcnJvclRleHQiLCJjb25zb2xlIiwicmVzcG9uc2VUZXh0IiwiZGF0YSIsInBhcnNlIiwiY2FuZGlkYXRlcyIsImNvbnRlbnQiLCJhaVJlc3BvbnNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai-chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fai-chat%2Froute&page=%2Fapi%2Fai-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-chat%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fai-chat%2Froute&page=%2Fapi%2Fai-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-chat%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_app_api_ai_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ai-chat/route.ts */ \"(rsc)/./app/api/ai-chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai-chat/route\",\n        pathname: \"/api/ai-chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai-chat/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/app/api/ai-chat/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_app_api_ai_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4yLjRfcmVhY3QtZG9tQDE5LjAuMF9yZWFjdEAxOS4wLjBfX3JlYWN0QDE5LjAuMC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhaS1jaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZhaS1jaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWktY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNEO0FBQzVFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2FwcC9hcGkvYWktY2hhdC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWktY2hhdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FpLWNoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FpLWNoYXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2FwcC9hcGkvYWktY2hhdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fai-chat%2Froute&page=%2Fapi%2Fai-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-chat%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.0.0_react@19.0.0__react@19.0.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fai-chat%2Froute&page=%2Fapi%2Fai-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-chat%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();